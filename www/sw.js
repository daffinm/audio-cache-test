// =====================================================================================================================
// WARNING: this file was generated. Edit ./src/sw.js and then run ./build to regenerate.
// =====================================================================================================================

function swlog(message, object) {
    console.log(`[Service Worker] ${message}`, object ? object : null);
}
importScripts('https://storage.googleapis.com/workbox-cdn/releases/4.3.1/workbox-sw.js');
if (workbox) {
    swlog(`Yay! Workbox is loaded üòÅ`);
} else {
    swlog(`Boo! Workbox didn't load üò¨`);
}

workbox.core.setCacheNameDetails({
    prefix: 'act',
    suffix: 'v1',
    precache: 'install-time',
    runtime: 'run-time',
});

// =====================================================================================================================
// Seeking inside a media file with partial requests does not work if the media is cached. Extra config is needed.
// See https://stackoverflow.com/questions/57903010/cannot-scrub-scroll-through-jplayer-audio-when-mp3-is-cached-by-workbox/57913561#57913561
// "If you plan on precaching the media files, then you need to take an extra step to explicitly route things so that
// they're read from the precache, since the standard precache response handler won't use the range request plugins"
// =====================================================================================================================
workbox.routing.registerRoute(
    /.*\.m4a/,
    new workbox.strategies.CacheOnly({
        cacheName: workbox.core.cacheNames.precache,
        plugins: [
            new workbox.rangeRequests.Plugin(),
        ],
        // This is needed since precached resources may
        // have a ?_WB_REVISION=... URL param.
        matchOptions: {
            ignoreSearch: true,
        }
    }),
);

// Precache...
workbox.precaching.precacheAndRoute([
  {
    "url": "index.html",
    "revision": "c773998276c793f8fabdde3cf0eda62b"
  },
  {
    "url": "Miaow-07-Bubble.m4a",
    "revision": "05abbdc4702604c0a697498a8d3e1142"
  }
]);
